<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Comparing binary diagnostic tests from paired data using testCompareR • testCompareR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Comparing binary diagnostic tests from paired data using testCompareR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">testCompareR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/using_testCompareR.html">Comparing binary diagnostic tests from paired data using testCompareR</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Kajlinko/testCompareR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Comparing binary diagnostic tests from paired data using testCompareR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Kajlinko/testCompareR/blob/main/vignettes/using_testCompareR.Rmd" class="external-link"><code>vignettes/using_testCompareR.Rmd</code></a></small>
      <div class="d-none name"><code>using_testCompareR.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kajlinko.github.io/testCompareR/">testCompareR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Binary diagnostic tests are among the most commonly used tests in
medicine and are used to rule in or out a certain condition. Commonly,
this condition is disease status, but tests may also detect, for
example, the presence of a bacteria or a virus, independent of any
clinical manifestations.</p>
<p>Test metrics such as diagnostic accuracies, predictive values and
likelihood ratios are useful tools to evaluate the efficacy of such
tests in comparison to a gold standard, however, these statistics only
provide a description of the quality of a test. Performing statistical
inference to evaluate if one test is better than another while
simultaneously referencing the gold standard is more complicated.
Several authors have invested significant effort into developing
statistical methods to perform such inference.</p>
<p>Understanding and implementing methods described in the statistical
literature is often far outside the comfort zone of clinicians,
particularly those who are not routinely involved in academic
research.</p>
<p>Here we demonstrate the implementation of the
<code>testCompareR</code> package.</p>
</div>
<div class="section level2">
<h2 id="generating-data">Generating data<a class="anchor" aria-label="anchor" href="#generating-data"></a>
</h2>
<p>The package comes with a data set derived from the Coronary Artery
Surgery Study (<code>cass</code>). This dataset looks at exercise stress
testing and history of chest pain as two tests for coronary artery
disease as determined by coronary angiography (the gold standard).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">cass</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-the-comparer-function">Using the compareR function<a class="anchor" aria-label="anchor" href="#using-the-comparer-function"></a>
</h2>
<p>The <code>testCompareR</code> package is elegant in its simplicity.
You can pass your data to the <code><a href="../reference/compareR.html">compareR()</a></code> function as the
only argument and the function outputs a list object containing the
results of descriptive and inferential statistical tests.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt;      test      metric estimate lower_ci upper_ci   p</span></span>
<span><span class="co">#&gt; 1  Test 1 Sensitivity     82.6     79.4     85.4    </span></span>
<span><span class="co">#&gt; 2  Test 2 Sensitivity     91.1     88.6     93.1 ***</span></span>
<span><span class="co">#&gt; 3  Test 1 Specificity     74.1     68.6     79.1    </span></span>
<span><span class="co">#&gt; 4  Test 2 Specificity     74.9     69.4     79.8    </span></span>
<span><span class="co">#&gt; 5  Test 1         PPV     88.1     85.2     90.5    </span></span>
<span><span class="co">#&gt; 6  Test 2         PPV     89.4     86.7     91.6    </span></span>
<span><span class="co">#&gt; 7  Test 1         NPV     64.8     59.2     70.0    </span></span>
<span><span class="co">#&gt; 8  Test 2         NPV     78.5     73.0     83.2 ***</span></span>
<span><span class="co">#&gt; 9  Test 1         PLR      3.2      2.6      4.0    </span></span>
<span><span class="co">#&gt; 10 Test 2         PLR      3.6      3.0      4.5    </span></span>
<span><span class="co">#&gt; 11 Test 1         NLR      0.2      0.2      0.3 ***</span></span>
<span><span class="co">#&gt; 12 Test 2         NLR      0.1      0.1      0.2    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 ' ' 1</span></span></code></pre></div>
<p>Individual results can be accessed via standard indexing.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span><span class="op">$</span><span class="va">acc</span><span class="op">$</span><span class="va">accuracies</span> <span class="co"># returns summary tables for diagnostic accuracies</span></span>
<span><span class="co">#&gt; $`Test 1`</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     82.6 1.5     79.4     85.4</span></span>
<span><span class="co">#&gt; Specificity     74.1 2.7     68.6     79.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Test 2`</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     91.1 1.2     88.6     93.1</span></span>
<span><span class="co">#&gt; Specificity     74.9 2.7     69.4     79.8</span></span></code></pre></div>
<p>The list output of the <code><a href="../reference/compareR.html">compareR()</a></code> function is useful
should you need to manipulate any of the individual outputs in
subsequent calculations. However, should you wish to see an
interpretation of your results, you can pass the <code><a href="../reference/compareR.html">compareR()</a></code>
output to the <code><a href="../reference/interpretR.html">interpretR()</a></code> function. This provides the same
results in a more human-readable format.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/interpretR.html">interpretR</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; CONTINGENCY TABLES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; True Status - POSITIVE</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative</span></span>
<span><span class="co">#&gt;   Positive      473       29</span></span>
<span><span class="co">#&gt;   Negative       81       25</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; True Status - NEGATIVE</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative</span></span>
<span><span class="co">#&gt;   Positive       22       46</span></span>
<span><span class="co">#&gt;   Negative       44      151</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Gold standard vs. Test 1</span></span>
<span><span class="co">#&gt;              Test 1</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative</span></span>
<span><span class="co">#&gt;      Positive      502      106</span></span>
<span><span class="co">#&gt;      Negative       68      195</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Gold standard vs. Test 2</span></span>
<span><span class="co">#&gt;              Test 2</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative</span></span>
<span><span class="co">#&gt;      Positive      554       54</span></span>
<span><span class="co">#&gt;      Negative       66      197</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; PREVALENCE (%)</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;            Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Prevalence     69.8 1.6     66.7     72.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; DIAGNOSTIC ACCURACIES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     82.6 1.5     79.4     85.4</span></span>
<span><span class="co">#&gt; Specificity     74.1 2.7     68.6     79.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     91.1 1.2     88.6     93.1</span></span>
<span><span class="co">#&gt; Specificity     74.9 2.7     69.4     79.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: Se1 = Se2 &amp; Sp1 = Sp2</span></span>
<span><span class="co">#&gt; Test statistic:  25.662  Adjusted p value:  6.971825e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: Se1 = Se2</span></span>
<span><span class="co">#&gt; Test statistic:  23.64545  Adjusted p value:  6.949149e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: Sp1 = Sp2</span></span>
<span><span class="co">#&gt; Test statistic:  0.01111111  Adjusted p value:  1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; PREDICTIVE VALUES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PPV     88.1 1.4     85.2     90.5</span></span>
<span><span class="co">#&gt; NPV     64.8 2.8     59.2     70.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PPV     89.4 1.2     86.7     91.6</span></span>
<span><span class="co">#&gt; NPV     78.5 2.6     73.0     83.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: PPV1 = PPV2 &amp; NPV1 = NPV2</span></span>
<span><span class="co">#&gt; Test statistic:  25.94449  Adjusted p value:  6.971825e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: PPV1 = PPV2</span></span>
<span><span class="co">#&gt; Test statistic:  0.8070579  Adjusted p value:  1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: NPV1 = NPV2</span></span>
<span><span class="co">#&gt; Test statistic:  22.50225  Adjusted p value:  1.049486e-05 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; LIKELIHOOD RATIOS</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PLR      3.2 0.3      2.6      4.0</span></span>
<span><span class="co">#&gt; NLR      0.2 0.0      0.2      0.3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PLR      3.6 0.4      3.0      4.5</span></span>
<span><span class="co">#&gt; NLR      0.1 0.0      0.1      0.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: PLR1 = PLR2 &amp; NLR1 = NLR2</span></span>
<span><span class="co">#&gt; Test statistic:  23.43805  Adjusted p value:  8.137524e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: PLR1 = PLR2</span></span>
<span><span class="co">#&gt; Test statistic:  0.8980246  Adjusted p value:  1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: NLR1 = NLR2</span></span>
<span><span class="co">#&gt; Test statistic:  4.662817  Adjusted p value:  1.247637e-05 ***SIGNIFICANT***</span></span></code></pre></div>
<p>And really, that’s it! That is all you need to know to get your
answers with <code>testCompareR</code>.</p>
<p>There is some additional functionality that might be useful to know
about, though.</p>
<div class="section level3">
<h3 id="flexible-input">Flexible input<a class="anchor" aria-label="anchor" href="#flexible-input"></a>
</h3>
<p>The <code><a href="../reference/compareR.html">compareR()</a></code> function will accept data as a data frame
or matrix and there are a range of coding options for positive and
negative results, detailed below. If you have been working across
multiple sites and find that researchers have used different coding
systems, no problem! As long as positive results are coded using
something from the positive list and negative results with something in
the negative list <code><a href="../reference/compareR.html">compareR()</a></code> will handle that for you. No
more manually re-coding your data!</p>
<p>“What about those pesky trailing spaces?” I hear you ask. Of course,
<code><a href="../reference/compareR.html">compareR()</a></code> can handle that, too. “Case-sensitivity?” Taken
care of.</p>
<p>POSITIVE: positive, pos, p, yes, y, true, t, +, 1</p>
<p>NEGATIVE: negative, neg, no, n, false, f, -, 0, 2</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create data frame with varied coding</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  test1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" positive "</span>, <span class="st">"POS "</span>, <span class="st">" n "</span>, <span class="st">"N "</span>, <span class="st">" 1 "</span>, <span class="st">"+"</span><span class="op">)</span>,</span>
<span>  test2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" NEG "</span>, <span class="st">" yes "</span>, <span class="st">" negative"</span>, <span class="st">" Y "</span>, <span class="st">"-"</span>, <span class="st">" 0 "</span><span class="op">)</span>,</span>
<span>  gold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># recode the dataframe</span></span>
<span><span class="va">recoded</span> <span class="op">&lt;-</span> <span class="fu">testCompareR</span><span class="fu">:::</span><span class="fu">recoder</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="va">recoded</span></span>
<span><span class="co">#&gt;   test1 test2 gold</span></span>
<span><span class="co">#&gt; 1     1     0    0</span></span>
<span><span class="co">#&gt; 2     1     1    1</span></span>
<span><span class="co">#&gt; 3     0     0    0</span></span>
<span><span class="co">#&gt; 4     0     1    1</span></span>
<span><span class="co">#&gt; 5     1     0    0</span></span>
<span><span class="co">#&gt; 6     1     0    1</span></span></code></pre></div>
<p>There are two things that <code><a href="../reference/compareR.html">compareR()</a></code> cannot handle.</p>
<p>Firstly, it is imperative that the data structure provided has three
columns and that those columns follow the pattern Test 1, Test 2, gold
standard. If you place the gold standard at any index other than
<code>your_data[,3]</code> then <code><a href="../reference/compareR.html">compareR()</a></code> may return a
result that looks sensible but does not answer the question you wanted
to ask.</p>
<p>Finally, <code><a href="../reference/compareR.html">compareR()</a></code> cannot handle missing data. Removing
missing data is an option, but consider why the data is missing and
don’t omit this from any write-up of the results. Alternatively, if the
data are missing at random, you could consider the use of imputation
methods to replace missing data. If the data are not missing at random
then imputation becomes vastly more complex and you should probably seek
expert advice.</p>
</div>
<div class="section level3">
<h3 id="variable-alpha">Variable alpha<a class="anchor" aria-label="anchor" href="#variable-alpha"></a>
</h3>
<p>If you’re using <code>testCompareR</code> because you’re not
statistically savvy and you want a nice function to do it all for you
then you should probably just leave alpha alone. If you have a good
reason, or you’re just messing around, feel free to change it to
whatever you’d like, though.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">300</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">65</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">135</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">280</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">120</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">55</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">145</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">400</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test with alpha = 0.5</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span></span>
<span><span class="co"># all results are significant</span></span>
<span><span class="fu"><a href="../reference/interpretR.html">interpretR</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; WARNING:</span></span>
<span><span class="co">#&gt; Zeros exist in contingency table. Tests may return NA/NaN.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; CONTINGENCY TABLES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; True Status - POSITIVE</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative</span></span>
<span><span class="co">#&gt;   Positive      280       20</span></span>
<span><span class="co">#&gt;   Negative        0      100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; True Status - NEGATIVE</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative</span></span>
<span><span class="co">#&gt;   Positive       55       10</span></span>
<span><span class="co">#&gt;   Negative        0      135</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Gold standard vs. Test 1</span></span>
<span><span class="co">#&gt;              Test 1</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative</span></span>
<span><span class="co">#&gt;      Positive      300      100</span></span>
<span><span class="co">#&gt;      Negative       65      135</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Gold standard vs. Test 2</span></span>
<span><span class="co">#&gt;              Test 2</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative</span></span>
<span><span class="co">#&gt;      Positive      280      120</span></span>
<span><span class="co">#&gt;      Negative       55      145</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; PREVALENCE (%)</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;            Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Prevalence     66.7 1.9     65.4       68</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; DIAGNOSTIC ACCURACIES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     75.0 2.2     73.5     76.4</span></span>
<span><span class="co">#&gt; Specificity     67.5 3.3     65.2     69.7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     70.0 2.3     68.4     71.5</span></span>
<span><span class="co">#&gt; Specificity     72.5 3.2     70.3     74.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: Se1 = Se2 &amp; Sp1 = Sp2</span></span>
<span><span class="co">#&gt; Test statistic:  31.57895  Adjusted p value:  4.167158e-07 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: Se1 = Se2</span></span>
<span><span class="co">#&gt; Test statistic:  18.05  Adjusted p value:  0.0001291072 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: Sp1 = Sp2</span></span>
<span><span class="co">#&gt; Test statistic:  8.1  Adjusted p value:  0.02213263 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; PREDICTIVE VALUES</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PPV     82.2 2.0     80.8     83.5</span></span>
<span><span class="co">#&gt; NPV     57.4 3.2     55.3     59.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PPV     83.6 2.0     82.2     84.9</span></span>
<span><span class="co">#&gt; NPV     54.7 3.1     52.6     56.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: PPV1 = PPV2 &amp; NPV1 = NPV2</span></span>
<span><span class="co">#&gt; Test statistic:  26.92232  Adjusted p value:  2.850504e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: PPV1 = PPV2</span></span>
<span><span class="co">#&gt; Test statistic:  3.171214  Adjusted p value:  0.1498935 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: NPV1 = NPV2</span></span>
<span><span class="co">#&gt; Test statistic:  5.653882  Adjusted p value:  0.06966709 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; LIKELIHOOD RATIOS</span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 1 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PLR      2.3 0.2      2.1      2.5</span></span>
<span><span class="co">#&gt; NLR      0.4 0.0      0.3      0.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Test 2 (%)</span></span>
<span><span class="co">#&gt;     Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; PLR      2.5 0.3      2.3      2.7</span></span>
<span><span class="co">#&gt; NLR      0.4 0.0      0.4      0.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Global Null Hypothesis: PLR1 = PLR2 &amp; NLR1 = NLR2</span></span>
<span><span class="co">#&gt; Test statistic:  23.37068  Adjusted p value:  8.416292e-06 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Investigating individual differences</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 1: PLR1 = PLR2</span></span>
<span><span class="co">#&gt; Test statistic:  1.779904  Adjusted p value:  0.1498935 ***SIGNIFICANT***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null Hypothesis 2: NLR1 = NLR2</span></span>
<span><span class="co">#&gt; Test statistic:  2.375766  Adjusted p value:  0.06966709 ***SIGNIFICANT***</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="margins">Margins<a class="anchor" aria-label="anchor" href="#margins"></a>
</h3>
<p>Contingency tables are included in the readout from
<code><a href="../reference/compareR.html">compareR()</a></code> or <code><a href="../reference/interpretR.html">interpretR()</a></code>. Some people like
to see the summed totals for columns and rows. If you’re one of those
people, then set <code>margins = TRUE</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">300</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">65</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">135</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">280</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">120</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">55</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">145</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">400</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test with alpha = 0.5</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, margins <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span></span>
<span><span class="co"># contingency tables have margins</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">cont</span></span>
<span><span class="co">#&gt; $`Gold standard vs. Test 1`</span></span>
<span><span class="co">#&gt;              Test 1</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative Sum</span></span>
<span><span class="co">#&gt;      Positive      300      100 400</span></span>
<span><span class="co">#&gt;      Negative       65      135 200</span></span>
<span><span class="co">#&gt;      Sum           365      235 600</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Gold standard vs. Test 2`</span></span>
<span><span class="co">#&gt;              Test 2</span></span>
<span><span class="co">#&gt; Gold standard Positive Negative Sum</span></span>
<span><span class="co">#&gt;      Positive      280      120 400</span></span>
<span><span class="co">#&gt;      Negative       55      145 200</span></span>
<span><span class="co">#&gt;      Sum           335      265 600</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`True Status: POS`</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative Sum</span></span>
<span><span class="co">#&gt;   Positive      280       20 300</span></span>
<span><span class="co">#&gt;   Negative        0      100 100</span></span>
<span><span class="co">#&gt;   Sum           280      120 400</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`True Status: NEG`</span></span>
<span><span class="co">#&gt;           Test 2</span></span>
<span><span class="co">#&gt; Test 1     Positive Negative Sum</span></span>
<span><span class="co">#&gt;   Positive       55       10  65</span></span>
<span><span class="co">#&gt;   Negative        0      135 135</span></span>
<span><span class="co">#&gt;   Sum            55      145 200</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiple-testing">Multiple testing<a class="anchor" aria-label="anchor" href="#multiple-testing"></a>
</h3>
<p>By default <code><a href="../reference/compareR.html">compareR()</a></code> runs a minimum of three hypothesis
tests and it can perform up to nine. This is accounted for using
adjusted p-values according to the Holm method. If you’d prefer to use a
different method, that’s no problem. Just set the
<code>multi_corr</code> parameter to any of the methods which are
handled by the base R function <code><a href="https://rdrr.io/r/stats/p.adjust.html" class="external-link">p.adjust()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># display p.adjust.methods</span></span>
<span><span class="va">p.adjust.methods</span></span>
<span><span class="co">#&gt; [1] "holm"       "hochberg"   "hommel"     "bonferroni" "BH"        </span></span>
<span><span class="co">#&gt; [6] "BY"         "fdr"        "none"</span></span>
<span></span>
<span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">300</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">65</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">135</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">280</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">120</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">55</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">145</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">400</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test with different multiple comparison methods</span></span>
<span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, multi_corr <span class="op">=</span> <span class="st">"holm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, multi_corr <span class="op">=</span> <span class="st">"bonf"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span></span>
<span><span class="co"># the more restrictive Bonferroni method returns higher adjusted p values</span></span>
<span><span class="va">result1</span><span class="op">$</span><span class="va">pv</span><span class="op">$</span><span class="va">glob.p.adj</span> <span class="op">&lt;</span> <span class="va">result2</span><span class="op">$</span><span class="va">pv</span><span class="op">$</span><span class="va">glob.p.adj</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="continuity-correction">Continuity correction<a class="anchor" aria-label="anchor" href="#continuity-correction"></a>
</h3>
<p>In certain circumstances <code><a href="../reference/compareR.html">compareR()</a></code> uses McNemar’s test
for testing differences in diagnostic accuracies. This test is routinely
performed with continuity correction. If you wish to perform it without
continuity correction then set <code>cc = FALSE</code>. If you aren’t
sure whether to run the test with or without continuity correction, then
stick to the default parameters.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">14</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">76</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">88</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run compareR without continuity correction</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, cc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">acc</span></span>
<span><span class="co">#&gt; $accuracies</span></span>
<span><span class="co">#&gt; $accuracies$`Test 1`</span></span>
<span><span class="co">#&gt;             Estimate   SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     75.0 15.3     41.5     93.4</span></span>
<span><span class="co">#&gt; Specificity     84.4  3.8     75.7     90.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $accuracies$`Test 2`</span></span>
<span><span class="co">#&gt;             Estimate   SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     12.5 11.7      1.4     46.2</span></span>
<span><span class="co">#&gt; Specificity     97.8  1.6     92.4     99.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $glob.test.stat</span></span>
<span><span class="co">#&gt; [1] "n &lt; 100 and prevalence &lt;= 10% - global test not used"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $glob.p.value</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $glob.p.adj</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sens.test.stat</span></span>
<span><span class="co">#&gt; [1] 13.33333</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sens.p.value</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sens.p.adj</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $spec.test.stat</span></span>
<span><span class="co">#&gt; [1] 13.84615</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $spec.p.value</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $spec.p.adj</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="decimal-places">Decimal places<a class="anchor" aria-label="anchor" href="#decimal-places"></a>
</h3>
<p>You can change the number of decimal places displayed in the summary
tables which are output by both the <code><a href="../reference/compareR.html">compareR()</a></code> and
<code><a href="../reference/interpretR.html">interpretR()</a></code> functions with the <code>dp</code> parameter.
This parameter does not affect the number of decimal places displayed
for p values or test statistics.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">317</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">83</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">68</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">132</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">281</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">119</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">51</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">149</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">390</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">210</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test with different multiple comparison methods</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, dp <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span></span>
<span><span class="co"># the values in the summary tables are displayed to 3 decimal places</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">acc</span><span class="op">$</span><span class="va">accuracies</span></span>
<span><span class="co">#&gt; $`Test 1`</span></span>
<span><span class="co">#&gt;             Estimate    SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity   81.282 1.975   77.135   84.863</span></span>
<span><span class="co">#&gt; Specificity   67.619 3.229   61.046   73.605</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Test 2`</span></span>
<span><span class="co">#&gt;             Estimate    SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity   72.051 2.272   67.415   76.289</span></span>
<span><span class="co">#&gt; Specificity   75.714 2.959   69.520   81.052</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="choosing-your-tests">Choosing your tests<a class="anchor" aria-label="anchor" href="#choosing-your-tests"></a>
</h3>
<p>Another important aspect of the <code>testCompareR</code> package is
the ability to control your study design. For example, if you have made
the a priori decision that you are only interested in the predictive
values, is it really necessary to control for multiple tests for
diagnostic accuracies and likelihood ratios? Of course not!</p>
<p>You can ask <code><a href="../reference/compareR.html">compareR()</a></code> not to display the results by
setting the parameters for any pairs of tests which aren’t of interest
to you to <code>FALSE</code>. The parameters are as follows:
<code>sesp</code> for diagnostic accuracies; <code>ppvnpv</code> for
predictive values; <code>plrnlr</code> for likelihood ratios.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">317</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">83</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">68</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">132</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">281</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">119</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">51</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">149</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">390</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">210</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># only display results for predictive values</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, test1 <span class="op">=</span> <span class="st">"test1"</span>, test2 <span class="op">=</span> <span class="st">"test2"</span>, gold <span class="op">=</span> <span class="st">"gold"</span>, </span>
<span>                   sesp <span class="op">=</span> <span class="cn">FALSE</span>, plrnlr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt;     test metric estimate lower_ci upper_ci   p</span></span>
<span><span class="co">#&gt; 1 Test 1    PPV     82.3     78.2     85.8    </span></span>
<span><span class="co">#&gt; 2 Test 2    PPV     84.6     80.4     88.1   *</span></span>
<span><span class="co">#&gt; 3 Test 1    NPV     66.0     59.5     72.1 ***</span></span>
<span><span class="co">#&gt; 4 Test 2    NPV     59.3     53.4     65.0    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 ' ' 1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="test-names">Test names<a class="anchor" aria-label="anchor" href="#test-names"></a>
</h3>
<p>If you want specific test names to be included in the output for
<code><a href="../reference/compareR.html">compareR()</a></code> then you can set the <code>test.names</code>
parameter. This parameter accepts a character vector of length 2.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simulate data</span></span>
<span><span class="va">test1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">317</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">83</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">68</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">132</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">281</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">119</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">51</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">149</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">390</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">210</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span>, <span class="va">gold</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># only display results for predictive values</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareR.html">compareR</a></span><span class="op">(</span><span class="va">df</span>, test.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POCT"</span>, <span class="st">"Lab Blood"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in validatR(df = df, test1 = test1, test2 = test2, gold = gold): Using default columns. Check test 1 is first column, test 2 is second</span></span>
<span><span class="co">#&gt;          column and gold standard is third column.</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">acc</span><span class="op">$</span><span class="va">accuracies</span></span>
<span><span class="co">#&gt; $POCT</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     81.3 2.0     77.1     84.9</span></span>
<span><span class="co">#&gt; Specificity     67.6 3.2     61.0     73.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`Lab Blood`</span></span>
<span><span class="co">#&gt;             Estimate  SE Lower CI Upper CI</span></span>
<span><span class="co">#&gt; Sensitivity     72.1 2.3     67.4     76.3</span></span>
<span><span class="co">#&gt; Specificity     75.7 3.0     69.5     81.1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>You made it to the end! That pretty well summarises everything you
need to know about the package. Hopefully it will save you a lot of time
when comparing two binary diagnostic tests.</p>
<p>Please get in touch with any refinements, comments or bugs. The
source code is available on Github if you think you can improve it
yourself!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kyle J. Wilson, Marc Henrion, José Antonio Roldán Nofuentes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
